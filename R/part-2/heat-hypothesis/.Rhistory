scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
geom_label(data = . %>% arrange(Median.Income.2015) %>% head)
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
geom_label(data = . %>% arrange(Median.Income.2015) %>% head,
mapping = (x = count, y = Median.Income.2015))
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
geom_label(data = . %>% arrange(Median.Income.2015) %>% head) +
geom_label(data = . %>% arrange(Median.Income.2015 %>% desc) %>% head)
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
geom_label(data = . %>% arrange(Median.Income.2015) %>% head) +
geom_label(data = . %>% arrange(Median.Income.2015 %>% desc) %>% head,nudge_x = 2)
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
geom_label(data = . %>% arrange(Median.Income.2015) %>% head) +
geom_label(data = . %>% arrange(Median.Income.2015 %>% desc) %>% head,
nudge_x = 100, y = 100)
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
geom_label(data = . %>% arrange(Median.Income.2015) %>% head) +
geom_label(data = . %>% arrange(Median.Income.2015 %>% desc) %>% head,
nudge_x = 100, nudge_y = 100)
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
geom_label(data = . %>% arrange(Median.Income.2015) %>% head) +
geom_label(data = . %>% arrange(Median.Income.2015 %>% desc) %>% head,
nudge_x = 1000, nudge_y = 100)
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
stat_density2d() +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
geom_density() +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
geom_density() +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
geom_density(aes(y = count)) +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
geom_density(aes(x = count)) +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
geom_histogram() +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
geom_bar() +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
geom_bar(stat = "identity") +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
geom_bar(stat = "identity") +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
stat_density()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
stat_density(stat = "identity")
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
geom_density(stat = "identity")
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
geom_density()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
geom_density2d()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
geom_density2d() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip()
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
labs(
x = "Median income",
y = "Total complaints per ZIP",
title = "Income vs Complaint Frequency"
) +
theme(
panel.grid.minor = element_blank()
)
ggsave(heat.by.zip, filename = "zip-income-count.png", device = "png",
path = "output/", height = 9, width = 9, units = "in")
heat.by.zip <-
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
labs(
x = "Median income",
y = "Total complaints per ZIP",
title = "Income vs Complaint Frequency"
) +
theme(panel.grid.minor = element_blank())
ggsave(heat.by.zip, filename = "zip-income-count.png", device = "png",
path = "output/", height = 9, width = 9, units = "in")
heat.by.zip <-
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP") %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
labs(
x = "Median income",
y = "Total complaints per ZIP",
title = "Income vs Complaint Frequency",
caption = "Plot generated by initial-exploration.R"
) +
theme(panel.grid.minor = element_blank())
ggsave(heat.by.zip, filename = "zip-income-count.png", device = "png",
path = "output/", height = 9, width = 9, units = "in")
heat.by.zip <-
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP")
heat.by.zip.plot <-
heat.by.zip %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
labs(
x = "Median income",
y = "Total complaints per ZIP",
title = "Income vs Complaint Frequency",
caption = "Plot generated by initial-exploration.R"
) +
theme(panel.grid.minor = element_blank())
ggsave(heat.by.zip, filename = "zip-income-count.png", device = "png",
path = "output/", height = 9, width = 9, units = "in")
heat.by.zip <-
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP")
heat.by.zip
heat.by.zip.plot <-
heat.by.zip %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
labs(
x = "Median income",
y = "Total complaints per ZIP",
title = "Income vs Complaint Frequency",
caption = "Plot generated by initial-exploration.R"
) +
theme(panel.grid.minor = element_blank())
heat.by.zip.plot
ggsave(heat.by.zip, filename = "zip-income-count.png", device = "png",
path = "output/", height = 9, width = 9, units = "in")
ggsave(heat.by.zip.plot, filename = "zip-income-count.png", device = "png",
path = "output/", height = 9, width = 9, units = "in")
heat.by.zip
census.income
census.income <- read_csv("./data/census_income.csv")
census.income <- read_csv("./data/census_income.csv")
names(census.income) <- c('ZIP', 'Median.Income.2015')
census.income <- census.income %>% mutate(ZIP = ZIP %>% as.numeric)
heat.by.zip <-
only.heat %>%
transmute(ZIP = Incident.Zip) %>%
group_by(ZIP) %>%
summarize(count = n()) %>%
ungroup() %>%
inner_join(., y = census.income, by = "ZIP")
heat.by.zip.plot <-
heat.by.zip %>%
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
labs(
x = "Median income",
y = "Total complaints per ZIP",
title = "Income vs Complaint Frequency",
caption = "Plot generated by initial-exploration.R"
) +
theme(panel.grid.minor = element_blank())
ggsave(heat.by.zip.plot, filename = "zip-income-count.png", device = "png",
path = "output/", height = 9, width = 9, units = "in")
heat.by.zip.plot
census.pop = read_csv("./data/census_age.csv")
census.pop
census.pop %<>% select(1, 2)
census.pop
census.pop %<>% select(1, 2)
census.pop
census.pop %<>% select(1, 2) %>% transmute(ZIP = `ZIP/Loc Code` %>% as.numeric, Total)
census.pop
heat.by.zip %>%
inner_join(., y = census.pop, by = "ZIP")
census.pop %<>%
select(1, 2) %>%
transmute(
ZIP = `ZIP/Loc Code` %>% as.numeric,
total.population = Total
)
census.pop = read_csv("./data/census_age.csv")
census.pop %<>%
select(1, 2) %>%
transmute(
ZIP = `ZIP/Loc Code` %>% as.numeric,
total.population = Total
)
census.pop
heat.by.zip %>%
inner_join(., y = census.pop, by = "ZIP")
heat.by.zip %>%
inner_join(., y = census.pop, by = "ZIP") %>%
mutate(per.capita = Median.Income.2015 / total.population)
ggplot(aes(x = count, y = Median.Income.2015, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
labs(
x = "Median income",
y = "Total complaints per ZIP",
title = "Per-capita Income vs Complaint",
caption = "Plot generated by initial-exploration.R"
) +
theme(panel.grid.minor = element_blank())
heat.by.zip %>%
inner_join(., y = census.pop, by = "ZIP") %>%
mutate(per.capita = Median.Income.2015 / total.population) %>%
ggplot(aes(x = count, y = per.capita, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
coord_flip() +
labs(
x = "Median income",
y = "Total complaints per ZIP",
title = "Per-capita Income vs Complaint",
caption = "Plot generated by initial-exploration.R"
) +
theme(panel.grid.minor = element_blank())
heat.by.zip %>%
inner_join(., y = census.pop, by = "ZIP") %>%
mutate(per.capita = Median.Income.2015 / total.population) %>%
ggplot(aes(x = count, y = per.capita, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
labs(
x = "Median income",
y = "Total complaints per ZIP",
title = "Per-capita Income vs Complaint",
caption = "Plot generated by initial-exploration.R"
) +
theme(panel.grid.minor = element_blank()) +
coord_flip()
heat.by.zip %>%
inner_join(., y = census.pop, by = "ZIP") %>%
mutate(per.capita = Median.Income.2015 / total.population) %>%
ggplot(aes(x = count, y = per.capita, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
labs(
y = "Median income",
x = "Total complaints per ZIP",
title = "Per-capita Income vs Complaint",
caption = "Plot generated by initial-exploration.R"
) +
theme(panel.grid.minor = element_blank()) +
coord_flip()
heat.by.zip %>%
inner_join(., y = census.pop, by = "ZIP") %>%
mutate(per.capita = Median.Income.2015 / total.population) %>%
arrange(per.capita)
heat.by.zip %>%
inner_join(., y = census.pop, by = "ZIP") %>%
mutate(per.capita = Median.Income.2015 / total.population) %>%
arrange(per.capita %>% desc)
heat.by.zip %>%
inner_join(., y = census.pop, by = "ZIP") %>%
mutate(per.capita = Median.Income.2015 / total.population) %>%
ggplot(aes(x = count, y = per.capita, label = ZIP %>% as.character)) +
geom_point() +
scale_y_continuous(labels = scales::dollar) +
scale_x_continuous(labels = scales::comma) +
labs(
y = "Median income",
x = "Total complaints per ZIP",
title = "Per-capita Income vs Complaint",
caption = "Plot generated by initial-exploration.R"
) +
theme(panel.grid.minor = element_blank()) +
coord_flip()
